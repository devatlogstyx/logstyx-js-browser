var Logstyx=(()=>{var $=Object.defineProperty,G=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var L=(t,e,r)=>e in t?$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,a=(t,e)=>{for(var r in e||(e={}))W.call(e,r)&&L(t,r,e[r]);if(A)for(var r of A(e))K.call(e,r)&&L(t,r,e[r]);return t},C=(t,e)=>G(t,M(e));var O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var S=O(E=>{E.safeParse=t=>{try{return t?JSON.parse(t):{}}catch(e){return{}}}});var N=O(l=>{var{safeParse:j}=S();l.getOSFromUserAgent=t=>/Windows NT/.test(t)?"Windows":/Mac OS X/.test(t)?"MacOS":/Linux/.test(t)?"Linux":/Android/.test(t)?"Android":/iPhone|iPad|iPod/.test(t)?"iOS":"Unknown";l.getBrowserFromUserAgent=t=>/Chrome/.test(t)&&!/Edg/.test(t)?"Chrome":/Edg/.test(t)?"Edge":/Firefox/.test(t)?"Firefox":/Safari/.test(t)&&!/Chrome/.test(t)?"Safari":"Unknown";l.getDeviceParams=()=>{var t,e;return{type:"browser",origin:window.location.origin,os:l.getOSFromUserAgent(navigator==null?void 0:navigator.userAgent),browser:l.getBrowserFromUserAgent(navigator==null?void 0:navigator.userAgent),screen:`${(t=window==null?void 0:window.screen)==null?void 0:t.width}x${(e=window==null?void 0:window.screen)==null?void 0:e.height}`}};var R={events:[],context:[],data:[],selector:[]},P,g=a(a({},R),((P=window==null?void 0:window.LogstyxConfig)==null?void 0:P.tracker)||{});function X(t){return t.closest("[data-logstyx-event]")||!g.selector||g.selector.length===0?!0:g.selector.some(e=>t.matches(e))}l.getBrowserContextExtras=t=>{let e={};return g.context.forEach(r=>{r==="event"?e.event=t:r==="url"?e.url=location.href:r==="referrer"?e.referrer=document.referrer||null:r==="title"&&(e.title=document.title||null)}),e};var H=t=>{let e={};return g.data.forEach(r=>{r==="tag"?e.tag=t.tagName:r==="id"&&t.id?e.id=t.id:r==="class"&&t.className?e.class=t.className:r==="text"&&(e.text=(t.textContent||"").trim().slice(0,100))}),e};l.attachGlobalEventListeners=t=>{let e=new Set(g.events);document.querySelectorAll("[data-logstyx-event]").forEach(r=>{r.dataset.logstyxEvent.split(/\s+/).forEach(o=>e.add(o))}),e.forEach(r=>{document.addEventListener(r,n=>{var c,d,m,h;if(!n.target||n.target.closest("[data-logstyx-skip='true']")||!X(n.target))return;let o=n.target.closest(`[data-logstyx-event~='${r}']`),y=!o,w=((c=o==null?void 0:o.dataset)==null?void 0:c.logstyxLevel)||"info",f=a(a(a({},j((d=o==null?void 0:o.dataset)==null?void 0:d.logstyxContext)),l.getBrowserContextExtras(r)),y?{fallback:!0}:{}),i=(m=o==null?void 0:o.dataset)!=null&&m.logstyxPayload?j(o.dataset.logstyxPayload):H(n.target);(h=t[w])==null||h.call(t,a(a({},f),i))})})}});var z=O((fe,q)=>{var Q=Object.defineProperty,F=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,k=(t,e,r)=>e in t?Q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,U=(t,e)=>{for(var r in e||(e={}))V.call(e,r)&&k(t,r,e[r]);if(F)for(var r of F(e))Y.call(e,r)&&k(t,r,e[r]);return t},I=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Z=(t,e,r)=>new Promise((n,o)=>{var y=i=>{try{f(r.next(i))}catch(c){o(c)}},w=i=>{try{f(r.throw(i))}catch(c){o(c)}},f=i=>i.done?n(i.value):Promise.resolve(i.value).then(y,w);f((r=r.apply(t,e)).next())}),ee=I(t=>{t.sanitizeObject=e=>Object.entries(e).reduce((r,[n,o])=>(o!=null&&o!==""&&!(Array.isArray(o)&&o.length===0)&&!(typeof o=="object"&&!Array.isArray(o)&&Object.keys(o).length===0&&o.constructor===Object)&&(r[n]=o),r),{}),t.safeParse=e=>{try{return e?JSON.parse(e):{}}catch(r){return{}}},t.normalizeArgs=e=>Array.isArray(e)?{message:JSON.stringify(e)}:typeof e=="object"?e:{message:String(e)},t.num2Int=e=>isNaN(e)?0:parseInt(e)}),te=I(t=>{var{sanitizeObject:e,normalizeArgs:r}=ee();t.useLogstyx=n=>{let{projectId:o,apiKey:y,appid:w,endpoint:f="https://api.logstyx.com/v1/logs",device:i,signatureFunc:c}=n,d=e({appid:w});function m(s){d=U(U({},d),s)}function h(s){if(Array.isArray(s))for(let v of s)delete d[v];else d={}}function x(s){return Z(this,arguments,function*(v,B={}){try{let p=e({timestamp:new Date().toISOString(),level:v,projectId:o,device:i,context:e(d),data:e(r(B))}),b={"Content-Type":"application/json"};if(typeof c=="function"){let{timestamp:T,signature:_}=c(o,y,p);b.signature=_,b.timestamp=T}return fetch(f,{method:"POST",body:JSON.stringify(p),headers:b})}catch(p){console.error(p)}})}return{info:s=>x("info",s),warning:s=>x("warning",s),error:s=>x("error",s),critical:s=>x("critical",s),send:x,setContext:m,clearContext:h}}}),{useLogstyx:re}=te();q.exports=t=>re(t)});var{attachGlobalEventListeners:oe,getDeviceParams:ne}=N(),se=z(),ie=ne(),u,D,J;if(typeof window!="undefined")if(window.LogstyxConfig&&!window.Logstyx){if(u=se(C(a({},window.LogstyxConfig),{device:window.LogstyxConfig.device||ie})),window.Logstyx=u,oe(u),((D=window==null?void 0:window.LogstyxConfig)==null?void 0:D.captureUncaught)===!0)try{typeof window!="undefined"&&(window.onerror=(t,e,r,n,o)=>{u.send("error",{message:t,stack:(o==null?void 0:o.stack)||null})})}catch(t){console.error(t)}if(((J=window==null?void 0:window.LogstyxConfig)==null?void 0:J.captureUnhandledRejections)===!0)try{let t=e=>{let r=e instanceof Error?e.message:String(e),n=e instanceof Error?e.stack:void 0;u.send("error",{message:r,stack:n})};window.onunhandledrejection=e=>t(e.reason)}catch(t){console.error(t)}}else window.Logstyx&&(u=window.Logstyx);})();

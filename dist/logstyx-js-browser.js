var Logstyx=(()=>{var G=Object.defineProperty,M=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var C=(t,e,r)=>e in t?G(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(t,e)=>{for(var r in e||(e={}))K.call(e,r)&&C(t,r,e[r]);if(L)for(var r of L(e))R.call(e,r)&&C(t,r,e[r]);return t},E=(t,e)=>M(t,W(e));var O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var S=O(A=>{A.safeParse=t=>{try{return t?JSON.parse(t):{}}catch(e){return{}}}});var F=O(l=>{var{safeParse:j}=S();l.getOSFromUserAgent=t=>/Windows NT/.test(t)?"Windows":/Mac OS X/.test(t)?"MacOS":/Linux/.test(t)?"Linux":/Android/.test(t)?"Android":/iPhone|iPad|iPod/.test(t)?"iOS":"Unknown";l.getBrowserFromUserAgent=t=>/Chrome/.test(t)&&!/Edg/.test(t)?"Chrome":/Edg/.test(t)?"Edge":/Firefox/.test(t)?"Firefox":/Safari/.test(t)&&!/Chrome/.test(t)?"Safari":"Unknown";l.sendFn=(t,{body:e})=>navigator.sendBeacon(t,e);l.getDeviceParams=()=>{var t,e;return{type:"browser",origin:window.location.origin,os:l.getOSFromUserAgent(navigator==null?void 0:navigator.userAgent),browser:l.getBrowserFromUserAgent(navigator==null?void 0:navigator.userAgent),screen:`${(t=window==null?void 0:window.screen)==null?void 0:t.width}x${(e=window==null?void 0:window.screen)==null?void 0:e.height}`}};var X={events:[],context:[],data:[],selector:[]},P,g=c(c({},X),((P=window==null?void 0:window.LogstyxConfig)==null?void 0:P.tracker)||{});function H(t){return t.closest("[data-logstyx-event]")||!g.selector||g.selector.length===0?!0:g.selector.some(e=>t.matches(e))}l.getBrowserContextExtras=t=>{let e={};return g.context.forEach(r=>{r==="event"?e.event=t:r==="url"?e.url=location.href:r==="referrer"?e.referrer=document.referrer||null:r==="title"&&(e.title=document.title||null)}),e};var Q=t=>{let e={};return g.data.forEach(r=>{r==="tag"?e.tag=t.tagName:r==="id"&&t.id?e.id=t.id:r==="class"&&t.className?e.class=t.className:r==="text"&&(e.text=(t.textContent||"").trim().slice(0,100))}),e};l.attachGlobalEventListeners=t=>{let e=new Set(g.events);document.querySelectorAll("[data-logstyx-event]").forEach(r=>{r.dataset.logstyxEvent.split(/\s+/).forEach(n=>e.add(n))}),e.forEach(r=>{document.addEventListener(r,o=>{var a,x,d,p;if(!o.target||o.target.closest("[data-logstyx-skip='true']")||!H(o.target))return;let n=o.target.closest(`[data-logstyx-event~='${r}']`),y=!n,w=((a=n==null?void 0:n.dataset)==null?void 0:a.logstyxLevel)||"info",f=c(c(c({},j((x=n==null?void 0:n.dataset)==null?void 0:x.logstyxContext)),l.getBrowserContextExtras(r)),y?{fallback:!0}:{}),i=(d=n==null?void 0:n.dataset)!=null&&d.logstyxPayload?j(n.dataset.logstyxPayload):Q(o.target);(p=t[w])==null||p.call(t,c(c({},f),i))})})}});var B=O((ue,z)=>{var V=Object.defineProperty,k=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,N=(t,e,r)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,U=(t,e)=>{for(var r in e||(e={}))Y.call(e,r)&&N(t,r,e[r]);if(k)for(var r of k(e))Z.call(e,r)&&N(t,r,e[r]);return t},q=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ee=(t,e,r)=>new Promise((o,n)=>{var y=i=>{try{f(r.next(i))}catch(a){n(a)}},w=i=>{try{f(r.throw(i))}catch(a){n(a)}},f=i=>i.done?o(i.value):Promise.resolve(i.value).then(y,w);f((r=r.apply(t,e)).next())}),te=q(t=>{t.sanitizeObject=e=>Object.entries(e).reduce((r,[o,n])=>(n!=null&&n!==""&&!(Array.isArray(n)&&n.length===0)&&!(typeof n=="object"&&!Array.isArray(n)&&Object.keys(n).length===0&&n.constructor===Object)&&(r[o]=n),r),{}),t.normalizeArgs=e=>Array.isArray(e)?{message:JSON.stringify(e)}:typeof e=="object"?e:{message:String(e)}}),re=q(t=>{var{sanitizeObject:e,normalizeArgs:r}=te();t.useLogstyx=o=>{let{projectId:n,apiKey:y,appid:w,endpoint:f="https://api.logstyx.com/v1/logs",device:i,sendFunc:a,signatureFunc:x}=o;typeof a!="function"&&(a=fetch);let d=e({appid:w});function p(s){d=U(U({},d),s)}function J(s){if(Array.isArray(s))for(let v of s)delete d[v];else d={}}function m(s){return ee(this,arguments,function*(v,T={}){try{let h=e({timestamp:new Date().toISOString(),level:v,projectId:n,device:i,context:e(d),data:e(r(T))}),b={"Content-Type":"application/json"};if(typeof x=="function"){let{timestamp:_,signature:$}=x(n,y,h);b.signature=$,b.timestamp=_}return a(f,{method:"POST",body:JSON.stringify(h),headers:b})}catch(h){console.error(h)}})}return{info:s=>m("info",s),warning:s=>m("warning",s),error:s=>m("error",s),critical:s=>m("critical",s),send:m,setContext:p,clearContext:J}}}),{useLogstyx:ne}=re();z.exports=t=>ne(t)});var{attachGlobalEventListeners:oe,getDeviceParams:se,sendFn:ie}=F(),ae=B(),ce=se(),u,D,I;if(typeof window!="undefined")if(window.LogstyxConfig&&!window.Logstyx){if(u=ae(E(c({},window.LogstyxConfig),{sendFunc:ie,device:window.LogstyxConfig.device||ce})),window.Logstyx=u,oe(u),((D=window==null?void 0:window.LogstyxConfig)==null?void 0:D.captureUncaught)===!0)try{typeof window!="undefined"&&(window.onerror=(t,e,r,o,n)=>{u.send("error",{message:t,stack:(n==null?void 0:n.stack)||null})})}catch(t){console.error(t)}if(((I=window==null?void 0:window.LogstyxConfig)==null?void 0:I.captureUnhandledRejections)===!0)try{let t=e=>{let r=e instanceof Error?e.message:String(e),o=e instanceof Error?e.stack:void 0;u.send("error",{message:r,stack:o})};window.onunhandledrejection=e=>t(e.reason)}catch(t){console.error(t)}}else window.Logstyx&&(u=window.Logstyx);})();
